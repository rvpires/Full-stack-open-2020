{"ast":null,"code":"import loginService from '../services/login';\nimport { setNotification } from './notificationReducer';\n\nconst loginReducer = (state = null, action) => {\n  console.log(action);\n\n  switch (action.type) {\n    case 'LOGIN':\n      return action.data.user;\n\n    case 'LOGOUT':\n      return null;\n\n    case 'SET':\n      return action.data.user;\n\n    default:\n      return state;\n  }\n};\n\nexport const login = (username, password) => {\n  return async dispatch => {\n    const user = await loginService.login({\n      username,\n      password\n    }).catch(dispatch(setNotification('Credentials are wrong', 5)));\n    window.localStorage.setItem('loggedUser', JSON.stringify(user));\n    dispatch({\n      type: 'LOGIN',\n      data: {\n        user\n      }\n    });\n  };\n};\nexport const logout = () => {\n  window.localStorage.removeItem('loggedUser');\n  return {\n    type: 'LOGOUT'\n  };\n};\nexport const setUser = user => {\n  return {\n    type: 'SET',\n    data: {\n      user\n    }\n  };\n};\nexport default loginReducer;","map":{"version":3,"sources":["/home/rvp/Desktop/Full-stack-open-2020/part7/blog/client/src/reducers/loginReducer.js"],"names":["loginService","setNotification","loginReducer","state","action","console","log","type","data","user","login","username","password","dispatch","catch","window","localStorage","setItem","JSON","stringify","logout","removeItem","setUser"],"mappings":"AAAA,OAAOA,YAAP,MAAyB,mBAAzB;AACA,SAASC,eAAT,QAAgC,uBAAhC;;AAEA,MAAMC,YAAY,GAAG,CAACC,KAAK,GAAG,IAAT,EAAgBC,MAAhB,KAA2B;AAE/CC,EAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;;AACA,UAAOA,MAAM,CAACG,IAAd;AAEA,SAAK,OAAL;AACC,aAAOH,MAAM,CAACI,IAAP,CAAYC,IAAnB;;AAED,SAAK,QAAL;AACC,aAAO,IAAP;;AAED,SAAK,KAAL;AACC,aAAOL,MAAM,CAACI,IAAP,CAAYC,IAAnB;;AAED;AACC,aAAON,KAAP;AAZD;AAcA,CAjBD;;AAqBA,OAAO,MAAMO,KAAK,GAAG,CAACC,QAAD,EAAYC,QAAZ,KACrB;AACC,SAAO,MAAMC,QAAN,IAAkB;AACxB,UAAMJ,IAAI,GAAG,MAAMT,YAAY,CAACU,KAAb,CAAmB;AAAEC,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,KAAnB,EACjBE,KADiB,CACXD,QAAQ,CAACZ,eAAe,CAAC,uBAAD,EAA0B,CAA1B,CAAhB,CADG,CAAnB;AAEAc,IAAAA,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,YAA5B,EAA0CC,IAAI,CAACC,SAAL,CAAeV,IAAf,CAA1C;AACAI,IAAAA,QAAQ,CAAC;AAAEN,MAAAA,IAAI,EAAG,OAAT;AAAmBC,MAAAA,IAAI,EAAG;AAAEC,QAAAA;AAAF;AAA1B,KAAD,CAAR;AACA,GALD;AAMA,CARM;AAUP,OAAO,MAAMW,MAAM,GAAG,MACtB;AACCL,EAAAA,MAAM,CAACC,YAAP,CAAoBK,UAApB,CAA+B,YAA/B;AACA,SAAO;AAAEd,IAAAA,IAAI,EAAG;AAAT,GAAP;AACA,CAJM;AAMP,OAAO,MAAMe,OAAO,GAAIb,IAAD,IACvB;AACC,SAAO;AAAEF,IAAAA,IAAI,EAAG,KAAT;AAAiBC,IAAAA,IAAI,EAAG;AAAEC,MAAAA;AAAF;AAAxB,GAAP;AAEA,CAJM;AAQP,eAAeP,YAAf","sourcesContent":["import loginService from '../services/login'\nimport { setNotification } from './notificationReducer'\n\nconst loginReducer = (state = null,  action) => {\n\n\tconsole.log(action)\n\tswitch(action.type)\n\t{\n\tcase 'LOGIN':\n\t\treturn action.data.user\n\n\tcase 'LOGOUT':\n\t\treturn null\n\n\tcase 'SET':\n\t\treturn action.data.user\n\n\tdefault:\n\t\treturn state\n\t}\n}\n\n\n\nexport const login = (username , password) =>\n{\n\treturn async dispatch => {\n\t\tconst user = await loginService.login({ username, password })\n\t\t\t.catch(dispatch(setNotification('Credentials are wrong', 5)))\n\t\twindow.localStorage.setItem('loggedUser', JSON.stringify(user))\n\t\tdispatch({ type : 'LOGIN' , data : { user } })\n\t}\n}\n\nexport const logout = () =>\n{\n\twindow.localStorage.removeItem('loggedUser')\n\treturn({ type : 'LOGOUT' })\n}\n\nexport const setUser = (user) =>\n{\n\treturn({ type : 'SET' , data : { user } })\n\n}\n\n\n\nexport default loginReducer\n\n\n\n"]},"metadata":{},"sourceType":"module"}